<!--<html>-->
<!--<head>-->
<!--</head>-->
<!--<body>-->
<!--hello world-->
<!--<%= yield %>-->
<!--</body>-->
<!--</html>-->
<!DOCTYPE html>
<html>
  <head>
    <meta content='IE=edge' http-equiv='X-UA-Compatible'>
    <meta charset='utf-8'>
    <meta content='width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no' name='viewport'>
    <title>Git Submodule vs. Subtree</title>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
    <link href="../../../stylesheets/site.css" rel="stylesheet" />
    <script src="../../../javascripts/all.js"></script>
    <script src="../../../javascripts/jquery-2.2.3.min.js"></script>
    
    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-46648633-1', 'winstonkotzan.com');
        ga('send', 'pageview');
    </script>
  </head>
  <body class='x2016 x2016_09 x2016_09_26 x2016_09_26_git-submodule-vs-subtree'>
    <div class='jumbotron'>
      <div class='container'>
        <div class='col-lg-offset-6 col-lg-6 blog-title-box'>
          <div class='content'>
            <a href="/blog/">Winston Kotzan's Technology Blog</a>
          </div>
        </div>
      </div>
    </div>
    <div class='container content'>
      <div class='col-md-8'>
        <div class='main article-content' role='main'>
          <h2 class='article-title'>Git Submodule vs. Subtree</h2>
          <div class='article-date'>09/26/2016</div>
          <div class='article-body'>
            <p><strong>&quot;Shared Repo&quot;</strong> refers to the code which is shared and will be packaged in a submodule or subtree.
            <strong>&quot;Parent Project Repo&quot;</strong> refers to the project that is going to be including the <em>Shared Repo</em> as
            a submodule or subtree. </p>
            
            <h2>1. How to Pull Changes from Shared Repo into Parent Project Repo</h2>
            
            <h3>Submodule</h3>
            
            <p>You can work in the submodule as if it were its own Git Repo. First you have to go into the submodule
            directory:</p>
            
            <p><code>cd lib/gitsub-submodule &amp;&amp; git fetch &amp;&amp; git merge origin/master</code></p>
            
            <p>Example:</p>
            
            <pre><code> (master)$ git fetch&#x000A;remote: Counting objects: 3, done.&#x000A;remote: Compressing objects: 100% (2/2), done.&#x000A;remote: Total 3 (delta 0), reused 3 (delta 0), pack-reused 0&#x000A;Unpacking objects: 100% (3/3), done.&#x000A;From github.com:wakproductions/gitsub-submodule&#x000A;   9dd60f8..e3bedf9  master     -&gt; origin/master&#x000A; (master)$ git merge origin/master&#x000A;Updating 9dd60f8..e3bedf9&#x000A;Fast-forward&#x000A; submodule-library.rb | 4 ++++&#x000A; 1 file changed, 4 insertions(+)&#x000A; (master)$ git log&#x000A;commit e3bedf9137028aa63dd88ff1e708ce08e921cc99&#x000A;Author: Winston Kotzan &lt;wak@wakproductions.com&gt;&#x000A;Date:   Mon Sep 26 15:40:17 2016 -0400&#x000A;&#x000A;    Add change to shared repo&#x000A;&#x000A;commit 9dd60f8fc47f089dd5081a0ed73efb7cc923fd9c&#x000A;Author: Winston Kotzan &lt;wak@wakproductions.com&gt;&#x000A;Date:   Wed Sep 21 10:25:56 2016 -0400&#x000A;&#x000A;    First commit - submodule&#x000A;</code></pre>
            
            <p>You also need to update the parent repo:</p>
            
            <pre><code> (master)$ git status&#x000A;On branch master&#x000A;Changes not staged for commit:&#x000A;  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)&#x000A;  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)&#x000A;  (commit or discard the untracked or modified content in submodules)&#x000A;&#x000A;    modified:   lib/gitsub-submodule (new commits, modified content)&#x000A;&#x000A; (master)$ git diff&#x000A;diff --git a/lib/gitsub-submodule b/lib/gitsub-submodule&#x000A;index 9dd60f8..e3bedf9 160000&#x000A;--- a/lib/gitsub-submodule&#x000A;+++ b/lib/gitsub-submodule&#x000A;@@ -1 +1 @@&#x000A;-Subproject commit 9dd60f8fc47f089dd5081a0ed73efb7cc923fd9c&#x000A;+Subproject commit e3bedf9137028aa63dd88ff1e708ce08e921cc99&#x000A;</code></pre>
            
            <p>** Note that the commit reference in the submodule has changed and needs to be committed in the parent repo**</p>
            
            <pre><code> (master)$ gc &quot;Update submodule&quot;&#x000A;On branch master&#x000A;Changes not staged for commit:&#x000A;  modified:   lib/gitsub-submodule (new commits)&#x000A;&#x000A;no changes added to commit&#x000A;&#x000A;</code></pre>
            
            <p>A disadvantage of using submodules is that your commit history will get dirty with &quot;Update submodule&quot; style commits
            in the parent project repo. You won&#39;t have specific information on the version bumps happening within the submodule.</p>
            
            <p>One of the things that I like about packaging via Ruby gem vs using a library as a submodule is that you can manage
            meaningful version numbers in a Ruby gem whereas all you have to go by in a submodule is a commit hash. This could
            make it difficult to track the changes to the shared repo that breaks other systems dependent on it. Let&#39;s say you make
            a change to a shared repo, then updated other projects using that shared repo. Things break in those other projects.
            How do you roll back? How do you identify which version of the shared repo each of your projects is running on?</p>
            
            <h2>2. How to Push Changes from Parent Project Repo to Shared Repo</h2>
            
            <h2>Submodule Caveats</h2>
            
            <ul>
            <li>When you clone such a project with submodules, by default you get the directories 
            that contain submodules, but none of the files within them yet. (https://git-scm.com/book/en/v2/Git-Tools-Submodules)
            To get around this, either do <code>git clone --recursive</code> or do <code>git submodule init &amp;&amp; git submodule update</code> after the 
            clone.</li>
            </ul>
          </div>
        </div>
      </div>
      <div class='col-md-4'>
        <aside>
          <h2>Recent Articles</h2>
          <ol>
            <li><a href="git-submodule-vs-subtree.html">Git Submodule vs. Subtree</a> <span>Sep 26</span></li>
            <li><a href="../23/configuring-circle-ci.html.html">Configuring Circle-CI for the First Time</a> <span>Sep 23</span></li>
            <li><a href="../14/getting-your-ruby-on-rails-application-code-into-docker.html">Getting your Ruby on Rails application code into Docker</a> <span>Sep 14</span></li>
            <li><a href="../12/graylog-apache-docker-using-gelf.html">Feeding Apache log files to Graylog with Docker and apache-mod_log_gelf</a> <span>Sep 12</span></li>
            <li><a href="../11/github-pages-organization-page-domain-name-on-middleman.html">Github Organization and Project Pages under a single domain with Middleman</a> <span>Sep 11</span></li>
            <li><a href="../11/middleman-middleman-gh-pages-first-publish-error-src-refspec-gh-pages-does-not-match-any.html">Receiving 'error: src refspec gh-pages does not match any' on first publish with Middleman/middleman-gh-pages</a> <span>Sep 11</span></li>
            <li><a href="../10/first-post.html">First Post</a> <span>Sep 10</span></li>
          </ol>
          <h2>By Year</h2>
          <ol>
            <li><a href="../../../2016.html">2016 (7)</a></li>
          </ol>
        </aside>
      </div>
    </div>
  </body>
</html>
