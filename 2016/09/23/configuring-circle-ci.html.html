<!--<html>-->
<!--<head>-->
<!--</head>-->
<!--<body>-->
<!--hello world-->
<!--<%= yield %>-->
<!--</body>-->
<!--</html>-->
<!DOCTYPE html>
<html>
  <head>
    <meta content='IE=edge' http-equiv='X-UA-Compatible'>
    <meta charset='utf-8'>
    <meta content='width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no' name='viewport'>
    <title>Configuring Circle-CI for the First Time</title>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
    <link href="../../../stylesheets/site.css" rel="stylesheet" />
    <script src="../../../javascripts/all.js"></script>
    <script src="../../../javascripts/jquery-2.2.3.min.js"></script>
    
    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-46648633-1', 'winstonkotzan.com');
        ga('send', 'pageview');
    </script>
  </head>
  <body class='x2016 x2016_09 x2016_09_23 x2016_09_23_configuring-circle-ci'>
    <div class='jumbotron'>
      <div class='container'>
        <div class='col-lg-offset-6 col-lg-6 blog-title-box'>
          <div class='content'>
            <a href="/blog/">Winston Kotzan's Technology Blog</a>
          </div>
        </div>
      </div>
    </div>
    <div class='container content'>
      <div class='col-md-8'>
        <div class='main article-content' role='main'>
          <h2 class='article-title'>Configuring Circle-CI for the First Time</h2>
          <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
          <!-- article-top -->
          <ins class="adsbygoogle"
               style="display:inline-block;width:728px;height:90px"
               data-ad-client="ca-pub-9623179230776920"
               data-ad-slot="7383597095"></ins>
          <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
          </script>
          <div class='article-date'>09/23/2016</div>
          <div class='article-body'>
            <p>I&#39;m setting up CI for my employer using Circle-CI. Here are some of the issues I&#39;m running into.</p>
            
            <p>1. <code>bundle install</code> fails.</p>
            
            <p>On the first run, we got the following error message:</p>
            
            <pre><code>bundle check --path=vendor/bundle || bundle install --path=vendor/bundle --jobs=4 --retry=3&#x000A;ruby-2.3.1 - #gemset created /opt/circleci/.rvm/gems/ruby-2.3.1@banks&#x000A;ruby-2.3.1 - #generating banks wrappers|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-..&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/rubygems/dependency.rb:319:in `to_specs&#39;: Could not find &#39;bundler&#39; (&gt;= 0.a) among 6 total gem(s) (Gem::LoadError)&#x000A;Checked in &#39;GEM_PATH=/opt/circleci/.rvm/gems/ruby-2.3.1@banks:/opt/circleci/.rvm/gems/ruby-2.3.1@global&#39;, execute `gem env` for more information&#x000A;    from /opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/rubygems/dependency.rb:328:in `to_spec&#39;&#x000A;    from /opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_gem.rb:65:in `gem&#39;&#x000A;    from /opt/circleci/.rvm/rubies/ruby-2.3.1/bin/bundle:22:in `&lt;main&gt;&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/rubygems/dependency.rb:319:in `to_specs&#39;: Could not find &#39;bundler&#39; (&gt;= 0.a) among 6 total gem(s) (Gem::LoadError)&#x000A;Checked in &#39;GEM_PATH=/opt/circleci/.rvm/gems/ruby-2.3.1@banks:/opt/circleci/.rvm/gems/ruby-2.3.1@global&#39;, execute `gem env` for more information&#x000A;    from /opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/rubygems/dependency.rb:328:in `to_spec&#39;&#x000A;    from /opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_gem.rb:65:in `gem&#39;&#x000A;    from /opt/circleci/.rvm/rubies/ruby-2.3.1/bin/bundle:22:in `&lt;main&gt;&#39;&#x000A;&#x000A;bundle check --path=vendor/bundle || bundle install --path=vendor/bundle --jobs=4 --retry=3  returned exit code 1&#x000A;&#x000A;Action failed: bundle install&#x000A;</code></pre>
            
            <p>The important line is here:</p>
            
            <pre><code>/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/rubygems/dependency.rb:319:in `to_specs&#39;: Could not find &#39;bundler&#39; (&gt;= 0.a) among 6 total gem(s) (Gem::LoadError)&#x000A;</code></pre>
            
            <p>Unfortunately, CI platforms don&#39;t always run out of the box very well. You need to tell Circle-CI some basic
            setup instructions like to first install bundler. So the remedy for this issue was to create a <code>circle.yml</code> file
            in my project root that looks like this:</p>
            
            <pre><code>  general:&#x000A;    branches:&#x000A;      ignore:&#x000A;        - /^deploy-.*/ # list of branches to ignore&#x000A;  dependencies:&#x000A;    pre:&#x000A;      - gem install bundler -v 1.13.1&#x000A;  test:&#x000A;    override:&#x000A;      - bundle exec rspec&#x000A;</code></pre>
            
            <p>Note the <code>dependencies</code> section which runs the command to install bundler first. After this change, bundle install
            ran correctly.</p>
            
            <p>2. Loading of the database schema fails (fail at <code>rake db:create db:schema:load ts:configure ts:index ts:start</code>)</p>
            
            <p>So the bundle was fixed. Now I was getting a new error:</p>
            
            <pre><code>export RAILS_ENV=&quot;test&quot;&#x000A;export RACK_ENV=&quot;test&quot;&#x000A;bundle exec rake db:create db:schema:load ts:configure ts:index ts:start --trace&#x000A;[DEPRECATION] `last_comment` is deprecated.  Please use `last_description` instead.&#x000A;[DEPRECATION] `last_comment` is deprecated.  Please use `last_description` instead.&#x000A;[DEPRECATION] `last_comment` is deprecated.  Please use `last_description` instead.&#x000A;[DEPRECATION] `last_comment` is deprecated.  Please use `last_description` instead.&#x000A;[DEPRECATION] `last_comment` is deprecated.  Please use `last_description` instead.&#x000A;[DEPRECATION] `last_comment` is deprecated.  Please use `last_description` instead.&#x000A;[DEPRECATION] `last_comment` is deprecated.  Please use `last_description` instead.&#x000A;[DEPRECATION] `last_comment` is deprecated.  Please use `last_description` instead.&#x000A;[DEPRECATION] `last_comment` is deprecated.  Please use `last_description` instead.&#x000A;in LoadError rescue statement&#x000A;** Invoke db:create (first_time)&#x000A;** Invoke db:load_config (first_time)&#x000A;** Execute db:load_config&#x000A;** Execute db:create&#x000A;** Invoke db:schema:load (first_time)&#x000A;** Invoke environment (first_time)&#x000A;** Execute environment&#x000A;DEPRECATION WARNING: The configuration option `config.serve_static_assets` has been renamed to `config.serve_static_files` to clarify its role (it merely enables serving everything in the `public` folder and is unrelated to the asset pipeline). The `serve_static_assets` alias will be removed in Rails 5.0. Please migrate your configuration files accordingly. (called from block in &lt;top (required)&gt; at /home/ubuntu/banks/config/environments/test.rb:16)&#x000A;DEPRECATION WARNING: Currently, Active Record suppresses errors raised within `after_rollback`/`after_commit` callbacks and only print them to the logs. In the next version, these errors will no longer be suppressed. Instead, the errors will propagate normally just like in other Active Record callbacks.&#x000A;&#x000A;You can opt into the new behavior and remove this warning by setting:&#x000A;&#x000A;  config.active_record.raise_in_transactional_callbacks = true&#x000A;&#x000A; (called from block in tsort_each at /opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:228)&#x000A;rake aborted!&#x000A;ActiveRecord::StatementInvalid: Mysql2::Error: Table &#39;circle_ruby_test.bank_details&#39; doesn&#39;t exist: SHOW FULL FIELDS FROM `bank_details`&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/mysql2-0.4.4/lib/mysql2/client.rb:107:in `_query&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/mysql2-0.4.4/lib/mysql2/client.rb:107:in `block in query&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/mysql2-0.4.4/lib/mysql2/client.rb:106:in `handle_interrupt&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/mysql2-0.4.4/lib/mysql2/client.rb:106:in `query&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:309:in `block in execute&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/connection_adapters/abstract_adapter.rb:484:in `block in log&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.7/lib/active_support/notifications/instrumenter.rb:20:in `instrument&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/connection_adapters/abstract_adapter.rb:478:in `log&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:309:in `execute&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/connection_adapters/mysql2_adapter.rb:231:in `execute&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:316:in `execute_and_free&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:463:in `columns&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/connection_adapters/schema_cache.rb:43:in `columns&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/attributes.rb:93:in `columns&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/model_schema.rb:260:in `column_names&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/relation/calculations.rb:232:in `aggregate_column&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/relation/calculations.rb:258:in `execute_simple_calculation&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/relation/calculations.rb:227:in `perform_calculation&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/relation/calculations.rb:133:in `calculate&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/relation/calculations.rb:80:in `maximum&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/querying.rb:13:in `maximum&#39;&#x000A;/home/ubuntu/banks/config/initializers/constants.rb:9:in `&lt;top (required)&gt;&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.7/lib/active_support/dependencies.rb:268:in `load&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.7/lib/active_support/dependencies.rb:268:in `block in load&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.7/lib/active_support/dependencies.rb:240:in `load_dependency&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.7/lib/active_support/dependencies.rb:268:in `load&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/engine.rb:652:in `block in load_config_initializer&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.7/lib/active_support/notifications.rb:166:in `instrument&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/engine.rb:651:in `load_config_initializer&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/engine.rb:616:in `block (2 levels) in &lt;class:Engine&gt;&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/engine.rb:615:in `each&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/engine.rb:615:in `block in &lt;class:Engine&gt;&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/initializable.rb:30:in `instance_exec&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/initializable.rb:30:in `run&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/initializable.rb:55:in `block in run_initializers&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:228:in `block in tsort_each&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:431:in `each_strongly_connected_component_from&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:421:in `block in each_strongly_connected_component_from&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/initializable.rb:44:in `each&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/initializable.rb:44:in `tsort_each_child&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:415:in `call&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:415:in `each_strongly_connected_component_from&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:349:in `block in each_strongly_connected_component&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:347:in `each&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:347:in `call&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:347:in `each_strongly_connected_component&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:226:in `tsort_each&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:205:in `tsort_each&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/initializable.rb:54:in `run_initializers&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/application.rb:352:in `initialize!&#39;&#x000A;/home/ubuntu/banks/config/environment.rb:5:in `&lt;top (required)&gt;&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.7/lib/active_support/dependencies.rb:274:in `require&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.7/lib/active_support/dependencies.rb:274:in `block in require&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.7/lib/active_support/dependencies.rb:240:in `load_dependency&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.7/lib/active_support/dependencies.rb:274:in `require&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/application.rb:328:in `require_environment!&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/application.rb:457:in `block in run_tasks_blocks&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/task.rb:248:in `block in execute&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/task.rb:243:in `each&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/task.rb:243:in `execute&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/task.rb:187:in `block in invoke_with_call_chain&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/task.rb:180:in `invoke_with_call_chain&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/task.rb:209:in `block in invoke_prerequisites&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/task.rb:207:in `each&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/task.rb:207:in `invoke_prerequisites&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/task.rb:186:in `block in invoke_with_call_chain&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/task.rb:180:in `invoke_with_call_chain&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/task.rb:173:in `invoke&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/application.rb:152:in `invoke_task&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/application.rb:108:in `block (2 levels) in top_level&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/application.rb:108:in `each&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/application.rb:108:in `block in top_level&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/application.rb:117:in `run_with_threads&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/application.rb:102:in `top_level&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/application.rb:80:in `block in run&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/application.rb:178:in `standard_exception_handling&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/application.rb:77:in `run&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/exe/rake:27:in `&lt;top (required)&gt;&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/bin/rake:23:in `load&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/bin/rake:23:in `&lt;top (required)&gt;&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/lib/bundler/cli/exec.rb:74:in `load&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/lib/bundler/cli/exec.rb:74:in `kernel_load&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/lib/bundler/cli/exec.rb:27:in `run&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/lib/bundler/cli.rb:332:in `exec&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/lib/bundler/vendor/thor/lib/thor.rb:359:in `dispatch&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/lib/bundler/cli.rb:20:in `dispatch&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/lib/bundler/vendor/thor/lib/thor/base.rb:440:in `start&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/lib/bundler/cli.rb:11:in `start&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/exe/bundle:34:in `block in &lt;top (required)&gt;&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/lib/bundler/friendly_errors.rb:100:in `with_friendly_errors&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/exe/bundle:26:in `&lt;top (required)&gt;&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/bin/bundle:23:in `load&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/bin/bundle:23:in `&lt;main&gt;&#39;&#x000A;Mysql2::Error: Table &#39;circle_ruby_test.bank_details&#39; doesn&#39;t exist&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/mysql2-0.4.4/lib/mysql2/client.rb:107:in `_query&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/mysql2-0.4.4/lib/mysql2/client.rb:107:in `block in query&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/mysql2-0.4.4/lib/mysql2/client.rb:106:in `handle_interrupt&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/mysql2-0.4.4/lib/mysql2/client.rb:106:in `query&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:309:in `block in execute&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/connection_adapters/abstract_adapter.rb:484:in `block in log&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.7/lib/active_support/notifications/instrumenter.rb:20:in `instrument&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/connection_adapters/abstract_adapter.rb:478:in `log&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:309:in `execute&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/connection_adapters/mysql2_adapter.rb:231:in `execute&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:316:in `execute_and_free&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:463:in `columns&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/connection_adapters/schema_cache.rb:43:in `columns&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/attributes.rb:93:in `columns&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/model_schema.rb:260:in `column_names&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/relation/calculations.rb:232:in `aggregate_column&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/relation/calculations.rb:258:in `execute_simple_calculation&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/relation/calculations.rb:227:in `perform_calculation&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/relation/calculations.rb:133:in `calculate&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/relation/calculations.rb:80:in `maximum&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/querying.rb:13:in `maximum&#39;&#x000A;/home/ubuntu/banks/config/initializers/constants.rb:9:in `&lt;top (required)&gt;&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.7/lib/active_support/dependencies.rb:268:in `load&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.7/lib/active_support/dependencies.rb:268:in `block in load&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.7/lib/active_support/dependencies.rb:240:in `load_dependency&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.7/lib/active_support/dependencies.rb:268:in `load&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/engine.rb:652:in `block in load_config_initializer&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.7/lib/active_support/notifications.rb:166:in `instrument&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/engine.rb:651:in `load_config_initializer&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/engine.rb:616:in `block (2 levels) in &lt;class:Engine&gt;&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/engine.rb:615:in `each&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/engine.rb:615:in `block in &lt;class:Engine&gt;&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/initializable.rb:30:in `instance_exec&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/initializable.rb:30:in `run&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/initializable.rb:55:in `block in run_initializers&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:228:in `block in tsort_each&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:431:in `each_strongly_connected_component_from&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:421:in `block in each_strongly_connected_component_from&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/initializable.rb:44:in `each&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/initializable.rb:44:in `tsort_each_child&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:415:in `call&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:415:in `each_strongly_connected_component_from&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:349:in `block in each_strongly_connected_component&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:347:in `each&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:347:in `call&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:347:in `each_strongly_connected_component&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:226:in `tsort_each&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:205:in `tsort_each&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/initializable.rb:54:in `run_initializers&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/application.rb:352:in `initialize!&#39;&#x000A;/home/ubuntu/banks/config/environment.rb:5:in `&lt;top (required)&gt;&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.7/lib/active_support/dependencies.rb:274:in `require&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.7/lib/active_support/dependencies.rb:274:in `block in require&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.7/lib/active_support/dependencies.rb:240:in `load_dependency&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activesupport-4.2.7/lib/active_support/dependencies.rb:274:in `require&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/application.rb:328:in `require_environment!&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/railties-4.2.7/lib/rails/application.rb:457:in `block in run_tasks_blocks&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/task.rb:248:in `block in execute&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/task.rb:243:in `each&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/task.rb:243:in `execute&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/task.rb:187:in `block in invoke_with_call_chain&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/task.rb:180:in `invoke_with_call_chain&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/task.rb:209:in `block in invoke_prerequisites&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/task.rb:207:in `each&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/task.rb:207:in `invoke_prerequisites&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/task.rb:186:in `block in invoke_with_call_chain&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/task.rb:180:in `invoke_with_call_chain&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/task.rb:173:in `invoke&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/application.rb:152:in `invoke_task&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/application.rb:108:in `block (2 levels) in top_level&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/application.rb:108:in `each&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/application.rb:108:in `block in top_level&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/application.rb:117:in `run_with_threads&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/application.rb:102:in `top_level&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/application.rb:80:in `block in run&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/application.rb:178:in `standard_exception_handling&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/lib/rake/application.rb:77:in `run&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rake-11.3.0/exe/rake:27:in `&lt;top (required)&gt;&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/bin/rake:23:in `load&#39;&#x000A;/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/bin/rake:23:in `&lt;top (required)&gt;&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/lib/bundler/cli/exec.rb:74:in `load&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/lib/bundler/cli/exec.rb:74:in `kernel_load&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/lib/bundler/cli/exec.rb:27:in `run&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/lib/bundler/cli.rb:332:in `exec&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/lib/bundler/vendor/thor/lib/thor.rb:359:in `dispatch&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/lib/bundler/cli.rb:20:in `dispatch&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/lib/bundler/vendor/thor/lib/thor/base.rb:440:in `start&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/lib/bundler/cli.rb:11:in `start&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/exe/bundle:34:in `block in &lt;top (required)&gt;&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/lib/bundler/friendly_errors.rb:100:in `with_friendly_errors&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/gems/bundler-1.13.1/exe/bundle:26:in `&lt;top (required)&gt;&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/bin/bundle:23:in `load&#39;&#x000A;/opt/circleci/.rvm/gems/ruby-2.3.1@banks/bin/bundle:23:in `&lt;main&gt;&#39;&#x000A;Tasks: TOP =&gt; db:schema:load =&gt; environment&#x000A;&#x000A;export RAILS_ENV=&quot;test&quot;&#x000A;export RACK_ENV=&quot;test&quot;&#x000A;bundle exec rake db:create db:schema:load ts:configure ts:index ts:start --trace&#x000A; returned exit code 1&#x000A;&#x000A;Action failed: rake db:create db:schema:load ts:configure ts:index ts:start&#x000A;</code></pre>
            
            <p>Now I think this has to do with <code>schema.rb</code> not working. When I first set up this project, I had to do a
            MySQL load of the database schema from the production system in order to get my local dev environment working.
            Trying to avoid going too far into a rabbit hole, I tried switching the load process from <code>schema.rb</code> to 
            <code>structure.sql</code> by adding the following line to our application&#39;s config file:</p>
            
            <pre><code>config.active_record.schema_format = :sql&#x000A;</code></pre>
            
            <p>I then ran <code>rake db:structure:dump</code> and checked the changes into source control. This resolved the database
            setup issue in Circle-CI. The CI server was smart enough to know based on the <code>application.rb</code> setting, to
            use <code>rake db:structure:load</code> in its initialization process.</p>
            
            <p>3. Schema migrations were not populated</p>
            
            <p>I ran into one final issue.</p>
            
            <pre><code>bundle exec rspec&#x000A;DEPRECATION WARNING: The configuration option `config.serve_static_assets` has been renamed to `config.serve_static_files` to clarify its role (it merely enables serving everything in the `public` folder and is unrelated to the asset pipeline). The `serve_static_assets` alias will be removed in Rails 5.0. Please migrate your configuration files accordingly. (called from block in &lt;top (required)&gt; at /home/ubuntu/banks/config/environments/test.rb:16)&#x000A;DEPRECATION WARNING: Currently, Active Record suppresses errors raised within `after_rollback`/`after_commit` callbacks and only print them to the logs. In the next version, these errors will no longer be suppressed. Instead, the errors will propagate normally just like in other Active Record callbacks.&#x000A;&#x000A;You can opt into the new behavior and remove this warning by setting:&#x000A;&#x000A;  config.active_record.raise_in_transactional_callbacks = true&#x000A;&#x000A; (called from block in tsort_each at /opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:228)&#x000A;[DEPRECATION] `last_comment` is deprecated.  Please use `last_description` instead.&#x000A;[DEPRECATION] `last_comment` is deprecated.  Please use `last_description` instead.&#x000A;[DEPRECATION] `last_comment` is deprecated.  Please use `last_description` instead.&#x000A;[DEPRECATION] `last_comment` is deprecated.  Please use `last_description` instead.&#x000A;[DEPRECATION] `last_comment` is deprecated.  Please use `last_description` instead.&#x000A;[DEPRECATION] `last_comment` is deprecated.  Please use `last_description` instead.&#x000A;[DEPRECATION] `last_comment` is deprecated.  Please use `last_description` instead.&#x000A;[DEPRECATION] `last_comment` is deprecated.  Please use `last_description` instead.&#x000A;[DEPRECATION] `last_comment` is deprecated.  Please use `last_description` instead.&#x000A;in LoadError rescue statement&#x000A;DEPRECATION WARNING: The configuration option `config.serve_static_assets` has been renamed to `config.serve_static_files` to clarify its role (it merely enables serving everything in the `public` folder and is unrelated to the asset pipeline). The `serve_static_assets` alias will be removed in Rails 5.0. Please migrate your configuration files accordingly. (called from block in &lt;top (required)&gt; at /home/ubuntu/banks/config/environments/test.rb:16)&#x000A;DEPRECATION WARNING: Currently, Active Record suppresses errors raised within `after_rollback`/`after_commit` callbacks and only print them to the logs. In the next version, these errors will no longer be suppressed. Instead, the errors will propagate normally just like in other Active Record callbacks.&#x000A;&#x000A;You can opt into the new behavior and remove this warning by setting:&#x000A;&#x000A;  config.active_record.raise_in_transactional_callbacks = true&#x000A;&#x000A; (called from block in tsort_each at /opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/tsort.rb:228)&#x000A;bundler: failed to load command: rspec (/home/ubuntu/banks/vendor/bundle/ruby/2.3.0/bin/rspec)&#x000A;ActiveRecord::PendingMigrationError: &#x000A;&#x000A;Migrations are pending. To resolve this issue, run:&#x000A;&#x000A;    bin/rake db:migrate RAILS_ENV=test&#x000A;&#x000A;&#x000A;  /home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/migration.rb:392:in `check_pending!&#39;&#x000A;  /home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/migration.rb:405:in `load_schema_if_pending!&#39;&#x000A;  /home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/migration.rb:411:in `block in maintain_test_schema!&#39;&#x000A;  /home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/migration.rb:642:in `suppress_messages&#39;&#x000A;  /home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/migration.rb:416:in `method_missing&#39;&#x000A;  /home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/activerecord-4.2.7/lib/active_record/migration.rb:411:in `maintain_test_schema!&#39;&#x000A;  /home/ubuntu/banks/spec/rails_helper.rb:18:in `&lt;top (required)&gt;&#39;&#x000A;  /home/ubuntu/banks/spec/controllers/admin/crawl_status_controller_spec.rb:1:in `require&#39;&#x000A;  /home/ubuntu/banks/spec/controllers/admin/crawl_status_controller_spec.rb:1:in `&lt;top (required)&gt;&#39;&#x000A;  /home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rspec-core-3.0.4/lib/rspec/core/configuration.rb:1058:in `load&#39;&#x000A;  /home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rspec-core-3.0.4/lib/rspec/core/configuration.rb:1058:in `block in load_spec_files&#39;&#x000A;  /home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rspec-core-3.0.4/lib/rspec/core/configuration.rb:1058:in `each&#39;&#x000A;  /home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rspec-core-3.0.4/lib/rspec/core/configuration.rb:1058:in `load_spec_files&#39;&#x000A;  /home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rspec-core-3.0.4/lib/rspec/core/runner.rb:97:in `setup&#39;&#x000A;  /home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rspec-core-3.0.4/lib/rspec/core/runner.rb:85:in `run&#39;&#x000A;  /home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rspec-core-3.0.4/lib/rspec/core/runner.rb:70:in `run&#39;&#x000A;  /home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rspec-core-3.0.4/lib/rspec/core/runner.rb:38:in `invoke&#39;&#x000A;  /home/ubuntu/banks/vendor/bundle/ruby/2.3.0/gems/rspec-core-3.0.4/exe/rspec:4:in `&lt;top (required)&gt;&#39;&#x000A;  /home/ubuntu/banks/vendor/bundle/ruby/2.3.0/bin/rspec:23:in `load&#39;&#x000A;  /home/ubuntu/banks/vendor/bundle/ruby/2.3.0/bin/rspec:23:in `&lt;top (required)&gt;&#39;&#x000A;Coverage report generated for RSpec to /home/ubuntu/banks/coverage. 165 / 710 LOC (23.24%) covered.&#x000A;&#x000A;bundle exec rspec returned exit code 1&#x000A;</code></pre>
            
            <p>I found out that this was caused by the <code>schema_migrations</code> table not being populated on my local development 
            system. As mentioned above, when I initially set up my local environment, I was given a data dump of the schema 
            to get my database up and running. This lacked the migration numbers. I pulled the data from the <code>schema_migrations</code>
            table from another environment, rebuilt <code>structure.sql</code> using <code>rake db:migrate</code>, and pushed out the changes.
            The test suite ran!   </p>
          </div>
          <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
          <!-- article-bottom -->
          <ins class="adsbygoogle"
               style="display:inline-block;width:336px;height:280px"
               data-ad-client="ca-pub-9623179230776920"
               data-ad-slot="8860330295"></ins>
          <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
          </script>
          <div id="disqus_thread"></div>
          <script>
          
            /**
             *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
             *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
            /*
             var disqus_config = function () {
             this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
             this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
             };
             */
            (function() { // DON'T EDIT BELOW THIS LINE
              var d = document, s = d.createElement('script');
              s.src = 'https://winstonkotzan.disqus.com/embed.js';
              s.setAttribute('data-timestamp', +new Date());
              (d.head || d.body).appendChild(s);
            })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </div>
      </div>
      <div class='col-md-4'>
        <aside>
          <h2>Recent Articles</h2>
          <ol>
            <li><a href="../../../2017/07/27/how-to-download-youtube-videos-to-your-hard-drive.html">How to Download Videos from Youtube and Save Them on Your Hard Drive</a> <span>Jul 27</span></li>
            <li><a href="../../../2017/07/17/interviewing-tip-3-step-process-to-a-good-cover-letter.html">Interviewing Tip - 3 Step Process fo Writing a Good Cover Letter</a> <span>Jul 17</span></li>
            <li><a href="../../../2017/07/13/interviewing-tip-peel-the-onion.html">Interviewing Tip - Peel the Onion</a> <span>Jul 13</span></li>
            <li><a href="../../../2017/07/12/docker-could-not-find-available-ipv4-address.html">Capistrano + Docker could not find an available, non-overlapping IPv4 address pool among the defaults to assign to the network</a> <span>Jul 12</span></li>
            <li><a href="../../../2017/06/25/introducing-momentum-stock-scans.html">Introducing MomentumStockScans.com!</a> <span>Jun 25</span></li>
            <li><a href="../../../2017/06/18/testing-instagram-omniauth-devise-in-development.html">How to test Devise Omniauth in your local development environment with Instagram</a> <span>Jun 18</span></li>
            <li><a href="../../../2017/06/08/new-website-us-treasury-yield-curve.html">US Treasury Yield Curve Chart</a> <span>Jun  8</span></li>
            <li><a href="../../../2017/06/06/docker-capistrano-asset-and-log-file-links.html">Docker + Capistrano + Rails Errors! "The asset "application.css" is not present in the asset pipeline"</a> <span>Jun  6</span></li>
            <li><a href="../../../2017/06/03/why-I-use-docker-on-aws.html">Why I Switched to Docker when Using AWS with Ruby on Rails</a> <span>Jun  3</span></li>
            <li><a href="../../../2017/06/03/installing-docker-on-ubuntu-with-ansible.html">Docker installation on AWS/Ubuntu Xenial made Easy with Ansible</a> <span>Jun  3</span></li>
          </ol>
          <h2>By Year</h2>
          <ol>
            <li><a href="../../../2017.html">2017 (18)</a></li>
            <li><a href="../../../2016.html">2016 (7)</a></li>
          </ol>
          <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
          <!-- Sidebar ad -->
          <ins class="adsbygoogle"
               style="display:inline-block;width:300px;height:600px"
               data-ad-client="ca-pub-9623179230776920"
               data-ad-slot="2953397495"></ins>
          <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
          </script>
        </aside>
      </div>
    </div>
  </body>
</html>
