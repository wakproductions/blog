<!--<html>-->
<!--<head>-->
<!--</head>-->
<!--<body>-->
<!--hello world-->
<!--<%= yield %>-->
<!--</body>-->
<!--</html>-->
<!DOCTYPE html>
<html>
  <head>
    <meta content='IE=edge' http-equiv='X-UA-Compatible'>
    <meta charset='utf-8'>
    <meta content='width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no' name='viewport'>
    <title>Configuring Circle-CI for the First Time</title>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" />
    <link href="../../../stylesheets/site.css" rel="stylesheet" />
    <script src="../../../javascripts/all.js"></script>
    <script src="../../../javascripts/jquery-2.2.3.min.js"></script>
    
    
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-46648633-1', 'winstonkotzan.com');
        ga('send', 'pageview');
    </script>
  </head>
  <body class='x2016 x2016_09 x2016_09_23 x2016_09_23_configuring-circle-ci'>
    <div class='jumbotron'>
      <div class='container'>
        <div class='col-lg-offset-6 col-lg-6 blog-title-box'>
          <div class='content'>
            <a href="/blog/">Winston Kotzan's Technology Blog</a>
          </div>
        </div>
      </div>
    </div>
    <div class='container content'>
      <div class='col-md-8'>
        <div class='main article-content' role='main'>
          <h2 class='article-title'>Configuring Circle-CI for the First Time</h2>
          <div class='article-date'>09/23/2016</div>
          <div class='article-body'>
            <p>I&#39;m setting up CI for my employer using Circle-CI. Here are some of the issues I&#39;m running into.</p>
            
            <ol>
            <li><code>bundle install</code> fails.</li>
            </ol>
            
            <p>On the first run, we got the following error message:</p>
            
            <pre><code>bundle check --path=vendor/bundle || bundle install --path=vendor/bundle --jobs=4 --retry=3&#x000A;ruby-2.3.1 - #gemset created /opt/circleci/.rvm/gems/ruby-2.3.1@banks&#x000A;ruby-2.3.1 - #generating banks wrappers|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-.|/-\|/-\|.-\|/-\|/-..&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/rubygems/dependency.rb:319:in `to_specs&#39;: Could not find &#39;bundler&#39; (&gt;= 0.a) among 6 total gem(s) (Gem::LoadError)&#x000A;Checked in &#39;GEM_PATH=/opt/circleci/.rvm/gems/ruby-2.3.1@banks:/opt/circleci/.rvm/gems/ruby-2.3.1@global&#39;, execute `gem env` for more information&#x000A;    from /opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/rubygems/dependency.rb:328:in `to_spec&#39;&#x000A;    from /opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_gem.rb:65:in `gem&#39;&#x000A;    from /opt/circleci/.rvm/rubies/ruby-2.3.1/bin/bundle:22:in `&lt;main&gt;&#39;&#x000A;/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/rubygems/dependency.rb:319:in `to_specs&#39;: Could not find &#39;bundler&#39; (&gt;= 0.a) among 6 total gem(s) (Gem::LoadError)&#x000A;Checked in &#39;GEM_PATH=/opt/circleci/.rvm/gems/ruby-2.3.1@banks:/opt/circleci/.rvm/gems/ruby-2.3.1@global&#39;, execute `gem env` for more information&#x000A;    from /opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/rubygems/dependency.rb:328:in `to_spec&#39;&#x000A;    from /opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_gem.rb:65:in `gem&#39;&#x000A;    from /opt/circleci/.rvm/rubies/ruby-2.3.1/bin/bundle:22:in `&lt;main&gt;&#39;&#x000A;&#x000A;bundle check --path=vendor/bundle || bundle install --path=vendor/bundle --jobs=4 --retry=3  returned exit code 1&#x000A;&#x000A;Action failed: bundle install&#x000A;</code></pre>
            
            <p>The important line is here:</p>
            
            <pre><code>/opt/circleci/ruby/ruby-2.3.1/lib/ruby/2.3.0/rubygems/dependency.rb:319:in `to_specs&#39;: Could not find &#39;bundler&#39; (&gt;= 0.a) among 6 total gem(s) (Gem::LoadError)&#x000A;</code></pre>
            
            <p>Unfortunately, CI platforms don&#39;t always run out of the box very well. You need to tell Circle-CI some basic
            setup instructions like to first install bundler. So the remedy for this issue was to create a <code>circle.yml</code> file
            in my project root that looks like this:</p>
            
            <pre><code>  general:&#x000A;    branches:&#x000A;      ignore:&#x000A;        - /^deploy-.*/ # list of branches to ignore&#x000A;  dependencies:&#x000A;    pre:&#x000A;      - gem install bundler -v 1.13.1&#x000A;  test:&#x000A;    override:&#x000A;      - bundle exec rspec&#x000A;</code></pre>
            
            <p>Note the <code>dependencies</code> section which runs the command to install bundler first. After this change, bundle install
            ran correctly.</p>
          </div>
        </div>
      </div>
      <div class='col-md-4'>
        <aside>
          <h2>Recent Articles</h2>
          <ol>
            <li><a href="configuring-circle-ci.html.html">Configuring Circle-CI for the First Time</a> <span>Sep 23</span></li>
            <li><a href="../14/getting-your-ruby-on-rails-application-code-into-docker.html">Getting your Ruby on Rails application code into Docker</a> <span>Sep 14</span></li>
            <li><a href="../12/graylog-apache-docker-using-gelf.html">Feeding Apache log files to Graylog with Docker and apache-mod_log_gelf</a> <span>Sep 12</span></li>
            <li><a href="../11/github-pages-organization-page-domain-name-on-middleman.html">Github Organization and Project Pages under a single domain with Middleman</a> <span>Sep 11</span></li>
            <li><a href="../11/middleman-middleman-gh-pages-first-publish-error-src-refspec-gh-pages-does-not-match-any.html">Receiving 'error: src refspec gh-pages does not match any' on first publish with Middleman/middleman-gh-pages</a> <span>Sep 11</span></li>
            <li><a href="../10/first-post.html">First Post</a> <span>Sep 10</span></li>
          </ol>
          <h2>By Year</h2>
          <ol>
            <li><a href="../../../2016.html">2016 (6)</a></li>
          </ol>
        </aside>
      </div>
    </div>
  </body>
</html>
